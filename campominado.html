<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campo Minado</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f0f0f0;
        }
        
        h1 {
            margin-bottom: 20px;
        }
        
        #minefield {
            display: grid;
            grid-template-columns: repeat(10, 30px);
            grid-template-rows: repeat(10, 30px);
            gap: 2px;
        }
        
        .cell {
            width: 30px;
            height: 30px;
            background-color: #bdbdbd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
        }
        
        .cell.revealed {
            background-color: #e0e0e0;
            cursor: default;
        }
        
        .cell.mine {
            background-color: red;
        }
        
        .cell.flagged {
            background-color: yellow;
        }
        .game-over-message {
            display: none;
            color: red;
            font-size: 24px;
            margin-top: 20px;
        }
    </style>





</head>
<body>
    <h1>Campo Minado</h1>
    <div id="minefield"></div>
    <div id="gameOverMessage" class="game-over-message">Game Over!</div>
    <script>
        // Get the minefield element
        const minefield = document.getElementById('minefield');
// Define the number of rows, columns, and mines
const numRows = 10;
const numCols = 10;
const minesCount = 20;
let mines = [];
let cells = [];

// Initialize the minefield by creating cells and placing mines
function initMinefield() {
    minefield.innerHTML = '';
    cells = [];
    mines = [];

    for (let i = 0; i < numRows * numCols; i++) {
        const cell = document.createElement('div');
        cell.classList.add('cell');
        cell.addEventListener('click', () => revealCell(i));
        cell.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            toggleFlag(i);
        });
        minefield.appendChild(cell);
        cells.push(cell);
    }

    // Place mines
    while (mines.length < minesCount) {
        const index = Math.floor(Math.random() * numRows * numCols);
        if (!mines.includes(index)) {
            mines.push(index);
        }
    }
}

// Reveal a cell and check if it contains a mine or the number of adjacent mines
function revealCell(index) {
    if (cells[index].classList.contains('revealed') || cells[index].classList.contains('flagged')) {
        return;
    }

    cells[index].classList.add('revealed');

    if (mines.includes(index)) {
        alert('Game Over!');
        setTimeout(initMinefield, 2000); // 2-second delay before resetting the game
        initMinefield();
        return;
    }

    const minesAround = countMinesAround(index);
    if (minesAround > 0) {
        cells[index].textContent = minesAround;
    } else {
        revealAdjacentCells(index);
    }
}

// Toggle a flag on a cell to mark it as a suspected mine
function toggleFlag(index) {
    if (cells[index].classList.contains('revealed') || cells[index].classList.contains('flagged')) {
        return;
    }

    cells[index].classList.toggle('flagged');
}

// Count the number of mines around a given cell
function countMinesAround(index) {
    const row = Math.floor(index / numCols);
    const col = index % numCols;
    let count = 0;

    for (let i = -1; i <= 1; i++) {
        for (let j = -1; j <= 1; j++) {
            const newRow = row + i;
            const newCol = col + j;
            if (newRow >= 0 && newRow < numRows && newCol >= 0 && newCol < numCols) {
                if (mines.includes(newRow * numCols + newCol)) {
                    count++;
                }
            }
        }
    }

    return count;
}

// Reveal adjacent cells recursively if they do not contain mines
function revealAdjacentCells(index) {
    const row = Math.floor(index / numCols);
    const col = index % numCols;

    for (let i = -1; i <= 1; i++) {
        for (let j = -1; j <= 1; j++) {
            const newRow = row + i;
            const newCol = col + j;
            const newIndex = newRow * numCols + newCol;
            if (newRow >= 0 && newRow < numRows && newCol >= 0 && newCol < numCols && !cells[newIndex].classList.contains('revealed')) {
                revealCell(newIndex);
            }
        }
    }
}

// Initialize the game by setting up the minefield
initMinefield();

    </script>
</body>
</html>